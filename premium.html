<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VoidEmail :: Premium Access</title>
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" as="style">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical CSS inlined for faster First Contentful Paint -->
    <style>
        /* Critical above-the-fold styles */
        body {
            font-family: 'Fira Code', 'Courier New', monospace;
            background-color: #000000;
            color: #00ff41;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.5);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .main-container {
            background-color: rgba(10, 25, 10, 0.85);
            border: 1px solid #00ff41;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.5), inset 0 0 10px rgba(0, 255, 65, 0.3);
            backdrop-filter: blur(3px);
            border-radius: 1rem;
            padding: 2rem;
            width: 100%;
            max-width: 32rem;
        }

        /* Form styles */
        .form-input {
            background-color: rgba(0, 20, 0, 0.8);
            border: 1px solid #00ff41;
            color: #00ff41;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            box-sizing: border-box;
            font-size: 1rem;
            transition: box-shadow 0.2s ease-in-out;
            caret-color: #00ff41;
        }
        .form-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(0, 255, 65, 0.7);
        }
        .form-input::placeholder {
            color: rgba(0, 255, 65, 0.4);
        }
        .form-input:disabled {
            background-color: rgba(10, 25, 10, 0.5);
            border-color: #4a5a51;
            cursor: not-allowed;
        }

        .primary-btn {
            background-color: transparent;
            border: 2px solid #00ff41;
            color: #00ff41;
            font-weight: 600;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            width: 100%;
            text-align: center;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            text-shadow: 0 0 5px rgba(0, 255, 65, 0.7);
            box-sizing: border-box;
        }
        .primary-btn:hover:not(:disabled) {
            background-color: #00ff41;
            color: #000000;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.8);
            text-shadow: none;
        }
        .primary-btn:disabled {
            border-color: #4a5a51;
            color: #4a5a51;
            cursor: not-allowed;
            opacity: 0.7;
            background-color: transparent;
            text-shadow: none;
        }

        /* Utility classes */
        .text-center { text-align: center; }
        .text-left { text-align: left; }
        .hidden { display: none; }
        .text-success { color: #00ff41; text-shadow: 0 0 5px #00ff41; }
        .text-warning { color: #ff3333; text-shadow: 0 0 5px #ff3333; }
        .text-info { color: #33bbff; text-shadow: 0 0 5px #33bbff; }
        .phantom-btn { border-color: #A95AFF; color: #A95AFF; text-shadow: 0 0 5px #A95AFF; }
        .phantom-btn:hover:not(:disabled) { background-color: #A95AFF; color: #fff; box-shadow: 0 0 15px rgba(169, 90, 255, 0.8); text-shadow: none; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin { animation: spin 1s linear infinite; }
        
        /* Layout utilities */
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .space-y-4 > * + * { margin-top: 1rem; }
        .space-y-2 > * + * { margin-top: 0.5rem; }
        .space-y-1 > * + * { margin-top: 0.25rem; }
        .mb-8 { margin-bottom: 2rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mt-4 { margin-top: 1rem; }
        .mr-2 { margin-right: 0.5rem; }
        .pl-4 { padding-left: 1rem; }
        
        /* Typography */
        .text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
        .text-2xl { font-size: 1.5rem; line-height: 2rem; }
        .text-sm { font-size: 0.875rem; line-height: 1.25rem; }
        .font-bold { font-weight: 700; }
        .font-medium { font-weight: 500; }
        .tracking-widest { letter-spacing: 0.1em; }
        .uppercase { text-transform: uppercase; }
        .list-none { list-style: none; }
        .block { display: block; }
        .inline-block { display: inline-block; }
        .px-8 { padding-left: 2rem; padding-right: 2rem; }
        
        /* Colors */
        .text-white\/80 { color: rgba(255, 255, 255, 0.8); }
        .h-5 { height: 1.25rem; }
        .w-5 { width: 1.25rem; }
        .w-auto { width: auto; }
        .w-full { width: 100%; }
        .opacity-25 { opacity: 0.25; }
        .opacity-75 { opacity: 0.75; }
    </style>
    
    <!-- Load non-critical resources asynchronously -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&display=swap"></noscript>
</head>
<body>
    
    <canvas id="matrix-canvas"></canvas>

    <div class="main-container">
        
        <header class="text-center mb-8 fade-in">
            <h1 class="text-4xl font-bold tracking-widest uppercase">VoidSMTP Premium Access</h1>
        </header>

        <main class="space-y-6">
            <div class="text-left space-y-2 fade-in" style="animation-delay: 200ms;">
                <p>> Gain access to our pre-configured SMTP server for maximum performance.</p>
                <p class="text-white/80">> No technical setup required. Free yourself from the constraints of personal SMTP servers.</p>
                <ul class="list-none pl-4 space-y-1">
                    <li><span class="text-success mr-2">✓</span> Unrestricted email spoofing</li>
                    <li><span class="text-success mr-2">✓</span> Enhanced deliverability & inbox placement</li>
                    <li><span class="text-success mr-2">✓</span> High-speed, reliable infrastructure</li>
                    <li><span class="text-warning mr-2">✗</span> No rate limits or restrictions</li>
                </ul>
            </div>

            <!-- Step 1: Email Verification -->
            <div id="step-1" class="space-y-4 fade-in" style="animation-delay: 400ms;">
                <div>
                    <label for="user-email" class="text-sm font-medium mb-1 block">> YOUR_EMAIL</label>
                    <input type="email" id="user-email" class="form-input" placeholder="[Enter your email for verification]">
                </div>
                <button id="send-code-btn" class="primary-btn">Send Verification Code</button>
            </div>
            
            <!-- Step 2: Code & Payment -->
            <div id="step-2" class="hidden space-y-4">
                 <div>
                    <label for="verify-code" class="text-sm font-medium mb-1 block">> VERIFICATION_CODE</label>
                    <input type="text" id="verify-code" class="form-input" placeholder="[Enter code from email]">
                </div>
                <button id="pay-btn" class="primary-btn phantom-btn">
                    <span id="pay-btn-text">Pay 0.05 SOL with Phantom Wallet</span>
                    <div id="loading-spinner" class="hidden">
                        <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                    </div>
                </button>
            </div>

            <!-- Step 3: Success -->
            <div id="step-3" class="hidden text-center">
                <p class="text-2xl text-success font-bold">> ACCESS GRANTED</p>
                <p class="text-white/80">> Your premium SMTP access is now active.</p>
                <a href="index.html" class="primary-btn mt-4 inline-block w-auto px-8">Access VoidEmail Panel</a>
            </div>
            
            <div id="status-message" class="text-center text-sm mt-4 font-bold h-5"></div>
        </main>
    </div>

    <script>
        // Optimized Matrix Effect with Performance Improvements
        class MatrixEffect {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'.split('');
                this.fontSize = 14;
                this.columns = 0;
                this.drops = [];
                this.isVisible = true;
                this.lastTime = 0;
                this.fps = 30; // Reduced from ~28.5fps (35ms) to 30fps for better performance
                this.frameInterval = 1000 / this.fps;
                
                // Performance optimizations
                this.resizeTimeout = null;
                this.animationId = null;
                
                this.init();
                this.bindEvents();
                this.start();
            }
            
            init() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
                this.columns = Math.floor(this.canvas.width / this.fontSize);
                this.drops = Array.from({ length: this.columns }, () => 
                    Math.floor(Math.random() * (this.canvas.height / this.fontSize))
                );
            }
            
            bindEvents() {
                // Throttled resize handler
                window.addEventListener('resize', () => {
                    if (this.resizeTimeout) clearTimeout(this.resizeTimeout);
                    this.resizeTimeout = setTimeout(() => this.init(), 150);
                });
                
                // Pause animation when page is hidden (Page Visibility API)
                document.addEventListener('visibilitychange', () => {
                    this.isVisible = !document.hidden;
                    if (this.isVisible) this.start();
                });
            }
            
            draw(currentTime) {
                if (currentTime - this.lastTime < this.frameInterval) return;
                this.lastTime = currentTime;
                
                // Clear with slight opacity for trail effect
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw characters
                this.ctx.fillStyle = '#00ff41';
                this.ctx.font = `${this.fontSize}px Fira Code, monospace`;
                
                for (let i = 0; i < this.drops.length; i++) {
                    const char = this.characters[Math.floor(Math.random() * this.characters.length)];
                    const x = i * this.fontSize;
                    const y = this.drops[i] * this.fontSize;
                    
                    this.ctx.fillText(char, x, y);
                    
                    // Reset drop when it goes off screen
                    if (y > this.canvas.height && Math.random() > 0.975) {
                        this.drops[i] = 0;
                    }
                    this.drops[i]++;
                }
            }
            
            animate = (currentTime) => {
                if (!this.isVisible) return;
                
                this.draw(currentTime);
                this.animationId = requestAnimationFrame(this.animate);
            }
            
            start() {
                if (this.animationId) cancelAnimationFrame(this.animationId);
                this.animationId = requestAnimationFrame(this.animate);
            }
            
            stop() {
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
        }

        // Application Logic with Performance Optimizations
        class PremiumApp {
            constructor() {
                this.elements = {
                    step1: document.getElementById('step-1'),
                    step2: document.getElementById('step-2'),
                    step3: document.getElementById('step-3'),
                    userEmail: document.getElementById('user-email'),
                    sendCodeBtn: document.getElementById('send-code-btn'),
                    verifyCode: document.getElementById('verify-code'),
                    payBtn: document.getElementById('pay-btn'),
                    statusMessage: document.getElementById('status-message'),
                    loadingSpinner: document.getElementById('loading-spinner'),
                    payBtnText: document.getElementById('pay-btn-text')
                };
                
                this.bindEvents();
            }
            
            bindEvents() {
                this.elements.sendCodeBtn.addEventListener('click', this.handleSendCode.bind(this));
                this.elements.payBtn.addEventListener('click', this.handlePayment.bind(this));
                
                // Add enter key support for better UX
                this.elements.userEmail.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handleSendCode();
                });
                
                this.elements.verifyCode.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.handlePayment();
                });
            }
            
            setStatus(message, type = 'info') {
                this.elements.statusMessage.textContent = `> ${message}`;
                this.elements.statusMessage.className = `text-center text-sm mt-4 font-bold h-5 text-${type}`;
            }
            
            setLoading(isLoading) {
                this.elements.payBtn.disabled = isLoading;
                this.elements.payBtnText.classList.toggle('hidden', isLoading);
                this.elements.loadingSpinner.classList.toggle('hidden', !isLoading);
            }
            
            // Optimized transitions with proper cleanup
            transitionToStep(fromStep, toStep) {
                fromStep.classList.add('hidden');
                toStep.classList.remove('hidden');
                toStep.classList.add('fade-in');
                
                // Clean up animation class after animation completes
                setTimeout(() => toStep.classList.remove('fade-in'), 500);
            }
            
            async handleSendCode() {
                const email = this.elements.userEmail.value.trim();
                
                if (!email || !this.isValidEmail(email)) {
                    this.setStatus('WARNING: Please enter a valid email.', 'warning');
                    return;
                }
                
                this.elements.sendCodeBtn.disabled = true;
                this.setStatus('Sending verification signal...', 'info');
                
                try {
                    // Simulate API call with proper error handling
                    await this.delay(1500);
                    
                    this.setStatus('Verification code sent. Check your inbox.', 'success');
                    this.transitionToStep(this.elements.step1, this.elements.step2);
                    this.elements.userEmail.disabled = true;
                    
                } catch (error) {
                    this.setStatus('ERROR: Failed to send verification code.', 'warning');
                } finally {
                    this.elements.sendCodeBtn.disabled = false;
                }
            }
            
            async handlePayment() {
                const code = this.elements.verifyCode.value.trim();
                
                if (!code || code.length < 4) {
                    this.setStatus('WARNING: Invalid verification code.', 'warning');
                    return;
                }
                
                this.setLoading(true);
                this.setStatus('Connecting to Phantom Wallet...', 'info');
                
                try {
                    // Simulate wallet connection
                    await this.delay(1500);
                    this.setStatus('Wallet connected. Awaiting payment...', 'info');
                    
                    // Simulate transaction
                    await this.delay(2500);
                    
                    this.setStatus('Payment received. Access granted.', 'success');
                    this.transitionToStep(this.elements.step2, this.elements.step3);
                    
                } catch (error) {
                    console.error('Payment Error:', error);
                    this.setStatus('ERROR: Payment failed or was cancelled.', 'warning');
                } finally {
                    this.setLoading(false);
                }
            }
            
            // Utility methods
            isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
        }

        // Initialize app when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize matrix effect
            const canvas = document.getElementById('matrix-canvas');
            if (canvas) {
                new MatrixEffect(canvas);
            }
            
            // Initialize app
            new PremiumApp();
        });
    </script>
</body>
</html>
